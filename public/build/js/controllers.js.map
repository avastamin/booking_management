{"version":3,"sources":["/resources/assets/js/controllers/eventsController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["App.controller('eventsController', ['$scope','eventsModel','uiCalendarConfig','$uibModal', function($scope,eventsModel,uiCalendarConfig,$uibModal) {\n\n    var date = new Date();\n    var d = date.getDate();\n    var m = date.getMonth();\n    var y = date.getFullYear();\n\n    $scope.events = []; // initiate to get events from callback\n\n    /* Change View */\n    $scope.changeView = function(view,calendar) {\n\n    };\n    /* Change View */\n    $scope.renderCalendar = function(calendar) {\n        $timeout(function() {\n            if(uiCalendarConfig.calendars[calendar]){\n                uiCalendarConfig.calendars[calendar].fullCalendar('render');\n            }\n        });\n    };\n    $scope.eventClick = function(calEvent, jsEvent, view) {\n\n        eventsModel.getevent(calEvent.id)\n            .success(function (data) {\n                console.log(data);\n                var uibmodalinstance =  $uibModal.open({\n                    animation: true,\n                    ariaLabelledBy: 'modal-title-bottom',\n                    ariaDescribedBy: 'modal-body-bottom',\n                    templateUrl:  'templates/partials/edit-event-form.html',\n                    size: 'sm',\n                    controller: function ($scope) {\n                        $scope.eventFormdata = data;\n                        $scope.eventFormdata.startdate = '2017-01-03';\n                        $scope.updateEvent = function () {\n                            console.log( $scope.eventFormdata);\n                            eventsModel.save($scope.eventFormdata)\n                                .success(function (data) {\n                                    $scope.cancel();\n                                });\n                        };\n                        $scope.cancel = function () {\n                            uibmodalinstance.close('cancel');\n                        };\n                        $scope.delete = function () {\n                            eventsModel.destroy($scope.eventFormdata.id)\n                                .success(function (data) {\n                                    $scope.cancel();\n                                });\n                        }\n                    }\n                });\n            });\n    };\n\n    $scope.dayClick = function(date, jsEvent, view) {\n     var uibmodalinstance =  $uibModal.open({\n            animation: true,\n            ariaLabelledBy: 'modal-title-bottom',\n            ariaDescribedBy: 'modal-body-bottom',\n            templateUrl:  'templates/partials/add-event-form.html',\n            size: 'sm',\n            controller: function ($scope) {\n                $scope.eventFormdata = {};\n             $scope.addEvent = function () {\n                 console.log( $scope.eventFormdata);\n                 eventsModel.save($scope.eventFormdata)\n                     .success(function (data) {\n                         $scope.cancel();\n                     });\n             };\n              $scope.cancel = function () {\n                  uibmodalinstance.close('cancel');\n              }\n            }\n        })\n    };\n\n    /* Render booked and free events on every day on Calendar view  */\n\n    $scope.eventRender = function( event, element, view ) {\n        //\n    };\n\n\n    /**\n     * Main settings of FullCalendar\n     * For more: https://github.com/angular-ui/ui-calendar\n     */\n\n    $scope.calendarConfig = {\n        calendar: {\n            allDaySlot: false,\n            timezone: 'local',\n            editable: false,\n            fixedWeekCount: true,\n            lang: 'de',\n            eventOrder: \"-title\",\n            height: 650,\n            header: {\n                left:   'title',\n                center: 'Custom text',\n                right:  'today prev,next'\n            },\n            eventClick: $scope.eventClick,\n            eventRender: $scope.eventRender,\n            dayClick: $scope.dayClick,\n            viewRender: $scope.changeView\n\n        }\n    };\n    $scope.callbackevents = function(start, end, timezone, callback) {\n\n        eventsModel.getevents()\n            .success(function (data) {\n                console.log(data);\n                var events = [];\n                angular.forEach(data,function(event,key){\n                    $scope.events.push({id: event.id, title: event.name, start: event.start_time});\n                });\n\n                callback(events);\n            });\n    }\n\n    $scope.eventSources = [$scope.events,$scope.callbackevents];\n\n}]);\n"]}