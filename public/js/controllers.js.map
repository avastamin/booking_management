{"version":3,"sources":["/resources/assets/js/controllers/eventsController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["App.controller('eventsController', ['$scope','eventsModel','uiCalendarConfig','$uibModal', function($scope,eventsModel,uiCalendarConfig,$uibModal) {\n\n    var date = new Date();\n    var d = date.getDate();\n    var m = date.getMonth();\n    var y = date.getFullYear();\n\n    $scope.events = []; // initiate to get events from callback\n\n    /* Change View */\n    $scope.changeView = function(view,calendar) {\n\n        $scope.currentMonth = moment(view.title).format(\"YYYY-MM\");\n\n        $scope.currentMonthInUTC = view.dayGrid.dayDates[10]._d; // used to 10 to avoid past month\n\n        //  console.log( moment($scope.currentMonthInUTC).startOf(\"month\").format(\"YYYY-MM-DD\"));\n\n    };\n    /* Change View */\n    $scope.renderCalendar = function(calendar) {\n        $timeout(function() {\n            if(uiCalendarConfig.calendars[calendar]){\n                uiCalendarConfig.calendars[calendar].fullCalendar('render');\n            }\n        });\n    };\n    $scope.eventClick = function(calEvent, jsEvent, view) {\n        alert('Event clicked!')\n    };\n\n    $scope.dayClick = function(date, jsEvent, view) {\n        $uibModal.open({\n            animation: true,\n            ariaLabelledBy: 'modal-title-bottom',\n            ariaDescribedBy: 'modal-body-bottom',\n            templateUrl:  'templates/partials/addeventform.html',\n            size: 'sm',\n            controller: function ($scope) {\n                $scope.name = 'bottom';\n            }\n        })\n    };\n\n    /* Render booked and free events on every day on Calendar view  */\n\n    $scope.eventRender = function( event, element, view ) {\n        //\n    };\n\n\n    /**\n     * Main settings of FullCalendar\n     * For more: https://github.com/angular-ui/ui-calendar\n     */\n\n    $scope.calendarConfig = {\n        calendar: {\n            allDaySlot: false,\n            timezone: 'local',\n            editable: false,\n            fixedWeekCount: true,\n            lang: 'de',\n            eventOrder: \"-title\",\n            height: 650,\n            header: {\n                left:   'title',\n                center: 'Custom text',\n                right:  'today prev,next'\n            },\n            eventClick: $scope.eventClick,\n            eventRender: $scope.eventRender,\n            dayClick: $scope.dayClick,\n            viewRender: $scope.changeView\n\n        }\n    };\n    $scope.callbackevents = function(start, end, timezone, callback) {\n\n        eventsModel.get()\n            .success(function (data) {\n                console.log(data);\n                var events = [];\n                angular.forEach(data,function(event,key){\n                    $scope.events.push({id: event.id, title: event.tilte, start: event.start_time});\n                });\n\n                callback(events);\n            });\n    }\n\n    $scope.eventSources = [$scope.events,$scope.callbackevents];\n\n}]);\n"]}